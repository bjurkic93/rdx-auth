<section class="card">
  <div class="card__header">
    <h1>Create your account</h1>
    <p>Start securing your sessions with a dedicated RDX Auth profile.</p>
  </div>

  <div class="alert alert--success" *ngIf="successMessage">
    {{ successMessage }}
  </div>
  <div class="alert alert--error" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" novalidate class="form">
    <h2 class="section-heading">Personal information</h2>
    <div class="grid">
      <label class="field">
        <span class="field__label">First name</span>
        <input
          type="text"
          formControlName="firstName"
          placeholder="Alex"
          autocomplete="given-name"
          [class.invalid]="registerForm.controls.firstName.touched && registerForm.controls.firstName.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.firstName.touched && registerForm.controls.firstName.hasError('required')">
          Your first name is required.
        </span>
        <span class="field__hint" *ngIf="registerForm.controls.firstName.touched && registerForm.controls.firstName.hasError('minlength')">
          Please enter at least 2 characters.
        </span>
      </label>

      <label class="field">
        <span class="field__label">Last name</span>
        <input
          type="text"
          formControlName="lastName"
          placeholder="Johnson"
          autocomplete="family-name"
          [class.invalid]="registerForm.controls.lastName.touched && registerForm.controls.lastName.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.lastName.touched && registerForm.controls.lastName.hasError('required')">
          Your last name is required.
        </span>
        <span class="field__hint" *ngIf="registerForm.controls.lastName.touched && registerForm.controls.lastName.hasError('minlength')">
          Please enter at least 2 characters.
        </span>
      </label>

      <label class="field">
        <span class="field__label">Email address</span>
        <input
          type="email"
          formControlName="email"
          placeholder="alex.johnson@example.com"
          autocomplete="email"
          [class.invalid]="registerForm.controls.email.touched && registerForm.controls.email.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.email.touched && registerForm.controls.email.hasError('required')">
          Email is required.
        </span>
        <span class="field__hint" *ngIf="registerForm.controls.email.touched && registerForm.controls.email.hasError('email')">
          Enter a valid email address.
        </span>
      </label>
    </div>

    <div class="grid grid--thirds">
      <label class="field">
        <span class="field__label">Country code</span>
        <input
          type="text"
          formControlName="phoneCountryCode"
          placeholder="+1"
          autocomplete="tel-country-code"
          [class.invalid]="registerForm.controls.phoneCountryCode.touched && registerForm.controls.phoneCountryCode.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.phoneCountryCode.touched && registerForm.controls.phoneCountryCode.hasError('required')">
          Country code is required.
        </span>
        <span class="field__hint" *ngIf="registerForm.controls.phoneCountryCode.touched && registerForm.controls.phoneCountryCode.hasError('pattern')">
          Use a plus sign followed by 1-4 digits.
        </span>
      </label>

      <label class="field">
        <span class="field__label">Phone number</span>
        <input
          type="tel"
          formControlName="phoneNumber"
          placeholder="2025550123"
          autocomplete="tel-national"
          [class.invalid]="registerForm.controls.phoneNumber.touched && registerForm.controls.phoneNumber.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.phoneNumber.touched && registerForm.controls.phoneNumber.hasError('required')">
          Phone number is required.
        </span>
        <span class="field__hint" *ngIf="registerForm.controls.phoneNumber.touched && registerForm.controls.phoneNumber.hasError('pattern')">
          Use digits only (6-15 digits).
        </span>
      </label>

      <label class="field">
        <span class="field__label">Preferred language</span>
        <select
          formControlName="preferredLanguage"
          [class.invalid]="registerForm.controls.preferredLanguage.touched && registerForm.controls.preferredLanguage.invalid"
        >
          <option *ngFor="let lang of languageOptions" [value]="lang">
            {{ lang }}
          </option>
        </select>
      </label>
    </div>

    <div class="grid">
      <label class="field">
        <span class="field__label">Date of birth</span>
        <input
          type="date"
          formControlName="dateOfBirth"
          autocomplete="bday"
          [class.invalid]="registerForm.controls.dateOfBirth.touched && registerForm.controls.dateOfBirth.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.dateOfBirth.touched && registerForm.controls.dateOfBirth.hasError('required')">
          Date of birth is required.
        </span>
      </label>
    </div>

    <h2 class="section-heading">Address</h2>
    <div class="grid">
      <label class="field">
        <span class="field__label">Address line 1</span>
        <input
          type="text"
          formControlName="addressLine1"
          placeholder="123 Main Street"
          autocomplete="address-line1"
          [class.invalid]="registerForm.controls.addressLine1.touched && registerForm.controls.addressLine1.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.addressLine1.touched && registerForm.controls.addressLine1.hasError('required')">
          Address line 1 is required.
        </span>
        <span class="field__hint" *ngIf="registerForm.controls.addressLine1.touched && registerForm.controls.addressLine1.hasError('minlength')">
          Please enter at least 3 characters.
        </span>
      </label>

      <label class="field">
        <span class="field__label">Address line 2 (optional)</span>
        <input
          type="text"
          formControlName="addressLine2"
          placeholder="Apt. 4B"
          autocomplete="address-line2"
          [class.invalid]="registerForm.controls.addressLine2.touched && registerForm.controls.addressLine2.invalid"
        />
      </label>
    </div>

    <div class="grid grid--thirds">
      <label class="field">
        <span class="field__label">City</span>
        <input
          type="text"
          formControlName="city"
          placeholder="New York"
          autocomplete="address-level2"
          [class.invalid]="registerForm.controls.city.touched && registerForm.controls.city.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.city.touched && registerForm.controls.city.hasError('required')">
          City is required.
        </span>
      </label>

      <label class="field">
        <span class="field__label">Country</span>
        <input
          type="text"
          formControlName="country"
          placeholder="United States"
          autocomplete="country-name"
          [class.invalid]="registerForm.controls.country.touched && registerForm.controls.country.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.country.touched && registerForm.controls.country.hasError('required')">
          Country is required.
        </span>
      </label>

      <label class="field">
        <span class="field__label">Postal code</span>
        <input
          type="text"
          formControlName="postcode"
          placeholder="10001"
          autocomplete="postal-code"
          [class.invalid]="registerForm.controls.postcode.touched && registerForm.controls.postcode.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.postcode.touched && registerForm.controls.postcode.hasError('required')">
          Postal code is required.
        </span>
      </label>
    </div>

    <h2 class="section-heading">Security</h2>
    <div class="grid">
      <label class="field">
        <span class="field__label">Password</span>
        <input
          type="password"
          formControlName="password"
          placeholder="••••••••"
          autocomplete="new-password"
          [class.invalid]="registerForm.controls.password.touched && registerForm.controls.password.invalid"
        />
        <span class="field__hint" *ngIf="registerForm.controls.password.touched && registerForm.controls.password.hasError('required')">
          Password is required.
        </span>
        <span class="field__hint" *ngIf="registerForm.controls.password.touched && registerForm.controls.password.hasError('minlength')">
          Use at least 8 characters.
        </span>
      </label>

      <label class="field">
        <span class="field__label">Confirm password</span>
        <input
          type="password"
          formControlName="confirmPassword"
          placeholder="••••••••"
          autocomplete="new-password"
          [class.invalid]="(registerForm.controls.confirmPassword.touched && registerForm.controls.confirmPassword.invalid) || passwordsMismatch"
        />
        <span class="field__hint" *ngIf="registerForm.controls.confirmPassword.touched && registerForm.controls.confirmPassword.hasError('required')">
          Please confirm your password.
        </span>
        <span class="field__hint" *ngIf="passwordsMismatch">
          Passwords must match.
        </span>
      </label>
    </div>

    <label class="field field--checkbox">
      <input type="checkbox" formControlName="termsAccepted" />
      <span>
        I agree to the <a href="#" rel="noopener">Terms of Service</a> and <a href="#" rel="noopener">Privacy Policy</a>.
      </span>
    </label>
    <span class="field__hint" *ngIf="registerForm.controls.termsAccepted.touched && registerForm.controls.termsAccepted.hasError('requiredTrue')">
      You must accept the terms to continue.
    </span>

    <button type="submit" class="button" [disabled]="registerForm.invalid || passwordsMismatch || isSubmitting">
      {{ isSubmitting ? 'Creating account...' : 'Create account' }}
    </button>
  </form>
</section>
